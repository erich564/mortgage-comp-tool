"use strict";(self.webpackChunkmortgage_comp_tool=self.webpackChunkmortgage_comp_tool||[]).push([[969],{969:function(t,e,a){a.r(e),a.d(e,{default:function(){return z}});var n,r=a(1413),o=a(7762),s=a(4721),i=a(9836),l=a(3382),c=a(5855),m=a(3994),u=a(3991),h=a.n(u),d=a(9718),p=a.n(d),y=a(2003),g=a.n(y),f=a(2791),x=a(2982),v=a(3861),j=a.n(v),b=a(2426),A=a.n(b),D=a(8499),M="${value:,.0f}",Z={red:"#b84c3e",green:"#86a542",blue:"#6881d8",gold:"#c18739",purple:"#8650a6",teal:"#50b47b",pink:"#b84c7d",grey:"#888"};for(var T in Z){var R=j()(Z[T]);Z["".concat(T,"s")]=[R.lighten(.4).hex(),R.darken(.25).hex()]}p().setOptions({lang:{thousandsSep:","}});var w=function(t){var e=function(t){var e=t[0],a=t[1],n=A().min(e.startDate,a.startDate).clone(),r=A().max(e.endDate,a.endDate).clone(),o=.02*r.diff(n,"days");return n.subtract(o,"days"),r.add(o,"days"),{minDate:n,maxDate:r}}(t),a=e.minDate,r=e.maxDate,o=function(t,e){for(var a=[],n=t.clone().add(1,"year").startOf("year");n.year()%5!==0;)n.add(1,"year");for(;n.isBefore(e);)a.push({color:"#EEE",width:1,value:n.valueOf(),zIndex:2}),n.add(5,"year");return a}(a,r);n={chart:{type:"spline",zoomType:"x"},plotOptions:{series:{states:{hover:{lineWidthPlus:0},inactive:{enabled:!1}},marker:{radius:2}}},xAxis:{type:"datetime",min:a.valueOf(),max:r.valueOf(),minRange:15778463e4,plotLines:o},yAxis:{title:{text:null},labels:{format:M},plotLines:[{color:"#AAA",width:1,value:0,zIndex:2}]},tooltip:{shared:!0,crosshairs:!0,xDateFormat:"%m-%Y",headerFormat:"{point.key}<br/>",valuePrefix:"$"}}},W=function(t,e){return(0,D.Z)(n,{title:{text:"Net Worth"},series:[{name:"Difference",data:t.map((function(t){return{x:t.unixTimeMs,y:t.difference}})),color:Z.grey}].concat((0,x.Z)(e.map((function(t,e){return{name:"".concat(t.name," Net Worth"),data:t.netWorth.map((function(t){return{x:t.unixTimeMs,y:t.netWorth}})),color:Z.blues[e]}})))),tooltip:{valueDecimals:0}})},C=function(t){return{chart:{type:"column"},title:{text:"Mortgage Interest By Year"},plotOptions:{column:{groupPadding:0,pointPadding:0},series:{states:{inactive:{enabled:!1},hover:!1}}},series:(0,x.Z)(t.map((function(t,e){return{name:"".concat(t.name," Interest"),data:t.interestByYear.map((function(t){return{name:t.year,y:t.interest}})),color:Z.reds[e]}}))),xAxis:{type:"category",categories:(0,x.Z)(new Set(t.map((function(t){return t.interestByYear.map((function(t){return t.year}))})).flat()))},yAxis:{title:{text:null},labels:{format:M},plotLines:[{color:"#AAA",width:1,value:0,zIndex:2}]},tooltip:{valueDecimals:0,headerFormat:"{point.key}<br/>",shared:!0,valuePrefix:"$"}}},I=function(t){return(0,D.Z)(n,{title:{text:"Mortgage Balances"},series:(0,x.Z)(t.map((function(t,e){return{name:"".concat(t.name," Balance"),data:[{x:t.startDate.subtract(1,"month").valueOf(),y:t.loanAmount}].concat((0,x.Z)(t.payments.map((function(t){return{x:t.unixTimeMs,y:t.remainingBalance}})))),color:Z.purples[e]}}))),tooltip:{valueDecimals:0}})},P=a(4529),S=a(6222),B=a(184),k="en-US",O=function(t){return+(Math.round(+"".concat(t,"e+2"))+"e-2")},F=function(t,e,a){var n=Math.pow(1+e,a);return O(t*(e*n)/(n-1))},Y=function(t){var e,a=h()(t);a.roi/=100,a.monthlyRoi=(e=a.roi,Math.pow(1+e,1/12)-1),a.marginalTaxRate/=100;var n,r=(0,o.Z)(a.mortgages);try{for(r.s();!(n=r.n()).done;){var s=n.value;if(s.name="Mortgage ".concat(s.id),s.interestRate/=100,s.loanAmount=+s.loanAmount,s.termMonths=P.Z.props[s.term].months,s.endDate=s.startDate.clone().add(s.termMonths-1,"months"),s.type!==S.Z.FixedRate){var i=S.Z.props[s.type].yearsFixed,l=s.interestRateAdjusted/100;s.rateAdjust={interestRate:l,monthlyInterestRate:l/12,adjustDate:s.startDate.clone().add(i,"years")}}s.monthlyInterestRate=s.interestRate/12,s.monthlyPayment=F(s.loanAmount,s.monthlyInterestRate,s.termMonths),s.payments=[],s.netWorth=[],s.closingCosts=+s.closingCosts,delete s.interestRateAdjusted}}catch(c){r.e(c)}finally{r.f()}return a};function q(t){var e=t.reportState,a=Y(e);!function(t){var e,a=(0,o.Z)(t);try{for(a.s();!(e=a.n()).done;)for(var n=e.value,r=n.loanAmount,s=n.monthlyInterestRate,i=n.startDate.clone(),l=n.monthlyPayment;r>0;){var c=O(r*s),m=void 0;m=i.isSame(n.endDate)?r:O(l-c);var u=O(r),h=O(u-m);r=h;var d={principal:m,interest:c,date:i.clone(),unixTimeMs:i.valueOf(),startingBalance:u,remainingBalance:h};if(n.payments.push(d),i.add(1,"month"),n.rateAdjust&&i.isSame(n.rateAdjust.adjustDate)){s=n.rateAdjust.monthlyInterestRate;var p=n.termMonths-n.rateAdjust.adjustDate.diff(n.startDate,"months");l=F(r,s,p),n.rateAdjust.monthlyPayment=l}}}catch(y){a.e(y)}finally{a.f()}}(a.mortgages);var u=function(t){var e=t.mortgages,a=t.isRefinance,n=t.doItemize,r=t.marginalTaxRate,o=t.monthlyRoi,s=e[0],i=e[1];if(i.startDate.isBefore(s.startDate)){var l=[i,s];s=l[0],i=l[1]}for(var c,m,u=0,h=0,d=s.payments.length,p=i.payments.length;s.payments[u]&&!s.payments[u].date.isSame(i.startDate);)u++;var y,g=0;a?(c=0,m=O(i.loanAmount-s.payments[u].startingBalance-i.closingCosts),y=-O(i.loanAmount-s.payments[u].startingBalance)):(c=-s.closingCosts,m=-i.closingCosts,y=0);var f=[];!function(){var t=c+g,e=m+y,a=s.payments[u].date.clone().subtract(1,"month").valueOf();s.netWorth.push({unixTimeMs:a,cash:c,equity:g,netWorth:t}),i.netWorth.push({unixTimeMs:a,cash:m,equity:y,netWorth:e}),f.push({unixTimeMs:a,difference:e-t})}();for(var x=c,v=m,j=s.monthlyPayment,b=i.monthlyPayment;u<d||h<p;){var A=u<d?s.payments[u]:i.payments[h],D=A.date,M=A.unixTimeMs,Z=void 0,T=void 0;u<d&&(s.rateAdjust&&D.isSame(s.rateAdjust.adjustDate)&&(j=s.rateAdjust.monthlyPayment),c=c-j+(void 0===x?0:x*o),n&&(c+=s.payments[u].interest*r),g+=s.payments[u].principal,Z=O(c+g),s.netWorth.push({unixTimeMs:M,cash:c,equity:g,netWorth:Z}),x=c,u++),h<p&&(i.rateAdjust&&D.isSame(i.rateAdjust.adjustDate)&&(b=i.rateAdjust.monthlyPayment),m=m-b+(void 0===v?0:v*o),n&&(m+=i.payments[h].interest*r),y+=i.payments[h].principal,T=m+y,i.netWorth.push({unixTimeMs:M,cash:m,equity:y,netWorth:T}),v=m,h++),null!==Z&&null!==T&&f.push({unixTimeMs:M,difference:T-Z})}return f}(a);!function(t){var e,a=(0,o.Z)(t);try{for(a.s();!(e=a.n()).done;){var n=e.value;n.interestByYear=[];var r,s=0,i=void 0,l=(0,o.Z)(n.payments);try{for(l.s();!(r=l.n()).done;){var c=r.value,m=c.date.year();i&&i!==m&&(n.interestByYear.push({year:i,interest:O(s)}),s=0),s+=c.interest,i=m}}catch(u){l.e(u)}finally{l.f()}}}catch(u){a.e(u)}finally{a.f()}}(a.mortgages),w(a.mortgages),console.log(a.mortgages);var h,d={border:0,fontSize:"initial",padding:1};return(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(s.Z,{variant:"middle"}),(0,B.jsx)("br",{}),(0,B.jsx)("br",{}),(0,B.jsx)(i.Z,{sx:{width:"fit-content",margin:"auto !important"},children:a.mortgages.map((function(t){return(0,B.jsx)(f.Fragment,{children:(0,B.jsx)(l.Z,{children:(0,B.jsxs)(c.Z,{children:[(0,B.jsxs)(m.Z,{sx:(0,r.Z)((0,r.Z)({},d),{},{verticalAlign:"top",whiteSpace:"nowrap"}),children:["Mortgage ",t.id,":"]}),(0,B.jsxs)(m.Z,{sx:d,children:["$",t.loanAmount.toLocaleString(k)," at"," ",100*t.interestRate,"% for",t.type===S.Z.FixedRate?" ".concat(P.Z.props[t.term].name,"."):" the first ".concat(t.rateAdjust.adjustDate.diff(t.startDate,"years")," years, then ").concat(100*t.rateAdjust.interestRate,"% for the remaining duration of the loan."),(0,B.jsx)("br",{}),"Monthly payment",t.type===S.Z.FixedRate?" is $".concat(t.monthlyPayment.toLocaleString(k),"."):" starts at $".concat(t.monthlyPayment.toLocaleString(k),", and then changes to $").concat(t.rateAdjust.monthlyPayment.toLocaleString(k)," on ").concat(t.rateAdjust.adjustDate.format("MM-DD-YYYY"),"."),(0,B.jsx)("br",{})]})]})})},t.id)}))}),(0,B.jsx)("br",{}),"The difference in net worths is the bottom-line takeaway for this tool. Note that you can zoom in on graphs by clicking and dragging. You also can show/hide lines by clicking on their legend entries.",(0,B.jsx)("br",{}),(0,B.jsx)("br",{}),(0,B.jsx)(g(),{highcharts:p(),options:W(u,a.mortgages)}),(0,B.jsx)("p",{children:'The Net Worth graph shows how Mortgage 1 and Mortgage 2 compare in value over time. Net Worth is defined here as Cash plus Equity. See below. The Difference graph line values are simply "Mortgage 2 Net Worth" minus "Mortgage 1 Net Worth."'}),(0,B.jsx)("br",{}),(0,B.jsx)(g(),{highcharts:p(),options:(h=a.mortgages,(0,D.Z)(n,{title:{text:"Cash & Equity"},series:[].concat((0,x.Z)(h.map((function(t,e){return{name:"".concat(t.name," Cash"),data:t.netWorth.map((function(t){return{x:t.unixTimeMs,y:t.cash}})),color:Z.teals[e]}}))),(0,x.Z)(h.map((function(t,e){return{name:"".concat(t.name," Equity"),data:t.netWorth.map((function(t){return{x:t.unixTimeMs,y:t.equity}})),color:Z.golds[e]}})))),tooltip:{valueDecimals:0}}))}),(0,B.jsxs)("p",{children:["For each monthly mortgage payment made, Cash goes down by that amount. Equity goes up by the principal portion of the payment. Cash has additional value over time, as it can be invested. To account for the time value of money, each month Cash is multiplied by a monthly ROI value (which is derived from the yearly ROI value supplied above). If Cash is positive, then this value is added to Cash. If Cash is negative, then this value is an opportunity cost that gets subtracted from Cash.",(0,B.jsx)("br",{}),(0,B.jsx)("br",{}),"If this scenario is a refinance, then the starting cash starts off increased by the cash-out amount and equity starts off decreased by the cash-out amount.",(0,B.jsx)("br",{})]}),(0,B.jsx)("br",{}),(0,B.jsx)(g(),{highcharts:p(),options:C(a.mortgages)}),(0,B.jsx)("p",{children:"This graph shows the total mortgage interest paid in each calendar year."}),(0,B.jsx)("br",{}),(0,B.jsx)(g(),{highcharts:p(),options:I(a.mortgages)}),(0,B.jsx)("p",{children:"This graph shows the outstanding mortgage balances decreasing over time."}),a.mortgages.map((function(t){return(0,B.jsxs)(f.Fragment,{children:[(0,B.jsx)("br",{}),(0,B.jsx)(g(),{highcharts:p(),options:(e=t,(0,D.Z)(n,{title:{text:"".concat(e.name," Amortization")},series:[{name:"Principal",data:e.payments.map((function(t){return{x:t.unixTimeMs,y:t.principal}})),color:Z.green},{name:"Interest",data:e.payments.map((function(t){return{x:t.unixTimeMs,y:t.interest}})),color:Z.red}],tooltip:{valueDecimals:2}}))}),(0,B.jsxs)("p",{children:["Amortization schedule for Mortgage ",t.id,"."]})]},t.id);var e}))]})}var z=(0,f.memo)(q)}}]);
//# sourceMappingURL=969.0963ea83.chunk.js.map