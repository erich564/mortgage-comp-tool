"use strict";(self.webpackChunkmortgage_comp_tool=self.webpackChunkmortgage_comp_tool||[]).push([[969],{969:function(t,e,a){a.r(e),a.d(e,{default:function(){return $}});var n,i=a(1413),r=a(9439),o=a(7762),s=a(4721),c=a(9836),m=a(3382),u=a(5855),h=a(3994),l=a(3991),d=a.n(l),p=a(9718),f=a.n(p),y=a(2003),g=a.n(y),v=a(2791),x=a(3433),b=a(3861),D=a.n(b),A=a(1164),M=a(2426),j="${value:,.0f}",I={red:"#b84c3e",green:"#86a542",blue:"#6881d8",gold:"#c18739",purple:"#8650a6",teal:"#50b47b",pink:"#b84c7d",grey:"#888"};for(var Z in I){var q=D()(I[Z]);I["".concat(Z,"s")]=[q.lighten(.4).hex(),q.darken(.25).hex()]}f().setOptions({lang:{thousandsSep:","}});var R=function(t){var e=function(t,e){var a=M.min(t.startDate,e.startDate).clone(),n=M.max(t.endDate,e.endDate).clone(),i=.02*n.diff(a,"days");return a.subtract(i,"days"),n.add(i,"days"),{minDate:a,maxDate:n}}(t.m1,t.m2),a=e.minDate,i=e.maxDate,r=function(t,e){for(var a=[],n=t.clone().add(1,"year").startOf("year");n.year()%5!==0;)n.add(1,"year");for(;n.isBefore(e);)a.push({color:"#EEE",width:1,value:n.valueOf(),zIndex:2}),n.add(5,"year");return a}(a,i);n={chart:{type:"spline",zoomType:"x"},plotOptions:{series:{states:{hover:{lineWidthPlus:0},inactive:{enabled:!1}},marker:{radius:2}}},xAxis:{type:"datetime",min:a.valueOf(),max:i.valueOf(),minRange:15778463e4,plotLines:r},yAxis:{title:{text:null},labels:{format:j},plotLines:[{color:"#AAA",width:1,value:0,zIndex:2}]},tooltip:{shared:!0,split:!0,crosshairs:!0,xDateFormat:"%m-%Y",headerFormat:"{point.key}<br/>",valuePrefix:"$"}}},S=function(t){return{chart:{type:"column"},title:{text:"Mortgage Interest By Year"},plotOptions:{column:{groupPadding:0,pointPadding:0},series:{states:{inactive:{enabled:!1},hover:!1}}},series:(0,x.Z)(t.map((function(t,e){return{name:"".concat(t.name," Interest"),data:t.interestByYear.map((function(t){return{name:t.year,y:t.interest}})),color:I.reds[e]}}))),xAxis:{type:"category",categories:(0,x.Z)(new Set(t.map((function(t){return t.interestByYear.map((function(t){return t.year}))})).flat()))},yAxis:{title:{text:null},labels:{format:j},plotLines:[{color:"#AAA",width:1,value:0,zIndex:2}]},tooltip:{split:!0,valueDecimals:0,headerFormat:"{point.key}<br/>",shared:!0,valuePrefix:"$"}}},w=function(t){return(0,A.Z)(n,{title:{text:"Mortgage Balances"},series:(0,x.Z)(t.map((function(t,e){return{name:"".concat(t.name," Balance"),data:[{x:t.startDate.subtract(1,"month").valueOf(),y:t.loanAmount}].concat((0,x.Z)(t.payments.map((function(t){return{x:t.unixTimeMs,y:t.remainingBalance}})))),color:I.purples[e]}}))),tooltip:{valueDecimals:0}})},Y=a(6700),C=a(2525),W=a(2521),z=a(7752),B=a(184),T=a(2426)("2018-02-15","YYYY-MM-DD"),F=function(t){return function(t,e){return+"".concat(Math.round(+"".concat(e,"e+").concat(t)),"e-").concat(t)}(2,t)},E=function(t,e,a){var n=Math.pow(1+e,a);return F(t*(e*n)/(n-1))},O=function(t){var e,a=d()(t);a.roi/=100,a.monthlyRoi=(e=a.roi,Math.pow(1+e,1/Y.F0)-1),a.marginalTaxRate/=100,a.otherItemizedDeductions=+a.otherItemizedDeductions,a.m1HomeAcquisitionDebt=+a.m1HomeAcquisitionDebt,a.refiNewAcquisitionDebt=+a.refiNewAcquisitionDebt;var n,i=(0,o.Z)(a.mortgages);try{for(i.s();!(n=i.n()).done;){var r=n.value;if(r.name="Mortgage ".concat(r.id),r.interestRate/=100,r.loanAmount=+r.loanAmount,r.termMonths=W.Z.props[r.term].months,r.endDate=r.startDate.clone().add(r.termMonths-1,"months"),r.type!==z.Z.FixedRate){var s=z.Z.props[r.type].yearsFixed,c=r.interestRateAdjusted/100;r.rateAdjust={interestRate:c,monthlyInterestRate:c/Y.F0,adjustDate:r.startDate.clone().add(s,"years")}}r.monthlyInterestRate=r.interestRate/Y.F0,r.monthlyPayment=E(r.loanAmount,r.monthlyInterestRate,r.termMonths),r.closingCosts=+r.closingCosts,delete r.interestRateAdjusted}}catch(m){i.e(m)}finally{i.f()}return a},P=function(t,e,a){return e.isAfter(T)?a===C.Z.MarriedFilingSeparately?Math.min(375e3,t):Math.min(75e4,t):a===C.Z.MarriedFilingSeparately?Math.min(5e5,t):Math.min(1e6,t)},k=function(t,e){var a=e.find((function(e){return e.year===t})),n=a.itemizationNetGain,i=a.itemizablePeriods;return F(n/i)};function N(t){var e=t.reportState,a=O(e),l=(0,r.Z)(a.mortgages,2);a.m1=l[0],a.m2=l[1],function(t){var e,a,n=t.m1,i=t.m2,r=t.irsFilingStatus;e=n.startDate.isBefore(i.startDate)?n.startDate.year():i.startDate.year(),a=n.endDate.isAfter(i.endDate)?n.endDate.year():i.endDate.year();for(var o=C.Z.props[r].standardDeduction,s=Object.keys(o),c=+s[0],m=+s.pop(),u=c-1;u>=e;u--)o[u]=F(o[u+1]/1.0325);for(var h=m+1;h<=a;h++)o[h]=o[h-1]}(a),function(t){var e,a=(0,o.Z)(t);try{for(a.s();!(e=a.n()).done;){var n=e.value,i=n.loanAmount,r=n.monthlyInterestRate,s=n.startDate.clone(),c=n.monthlyPayment;for(n.payments=[];i>0;){var m=F(i*r),u=void 0;u=s.isSame(n.endDate)?i:F(c-m);var h=F(i),l=F(h-u);i=l;var d={principal:u,interest:m,date:s.clone(),unixTimeMs:s.valueOf(),startingBalance:h,remainingBalance:l};if(n.payments.push(d),s.add(1,"month"),n.rateAdjust&&s.isSame(n.rateAdjust.adjustDate)){r=n.rateAdjust.monthlyInterestRate;var p=n.termMonths-n.rateAdjust.adjustDate.diff(n.startDate,"months");c=E(i,r,p),n.rateAdjust.monthlyPayment=c}}}}catch(f){a.e(f)}finally{a.f()}}(a.mortgages),a.firstSharedM1Index=function(t){for(var e=t.m1,a=t.m2,n=0;e.payments[n]&&!e.payments[n].date.isSame(a.startDate);)if(1e3===++n)throw new Error("Couldn't find intersecting payment dates between the two mortgages.");return n}(a),a.isRefinance&&function(t){var e=t.m1,a=t.m2,n=t.firstSharedM1Index-1,i=e.payments[n],r=i.date.clone().date(15).daysInMonth();e.proRatedInterest=F(i.interest*(14/r)),a.proRatedInterest=F(a.payments[0].interest*((r-15+1)/r))}(a),function(t){var e=t.isRefinance,a=t.refiNewAcquisitionDebt,n=t.irsFilingStatus,i=t.m1,r=t.m2,o=t.firstSharedM1Index,s=t.m1HomeAcquisitionDebt;if(i.initEquity=0,e){var c=i.payments[o-1].startingBalance;i.initCash=0,r.initCash=F(r.loanAmount-c-r.closingCosts-i.proRatedInterest-r.proRatedInterest),r.initEquity=-F(r.loanAmount-c),i.startDate.isAfter(T)&&0!==s?i.homeAcquisitionDebt=Math.min(s,i.loanAmount):i.homeAcquisitionDebt=i.loanAmount;var m=r.loanAmount;r.startDate.isAfter(T)&&(m=Math.min(i.homeAcquisitionDebt,c,m)+a),r.homeAcquisitionDebt=Math.min(F(m),r.loanAmount)}else{var u=r.loanAmount-i.loanAmount;i.initCash=-i.closingCosts,r.initCash=u-r.closingCosts,r.initEquity=-u,r.homeAcquisitionDebt=r.loanAmount}i.homeAcquisitionDebt=P(i.homeAcquisitionDebt,i.startDate,n),r.homeAcquisitionDebt=P(r.homeAcquisitionDebt,i.startDate,n)}(a),function(t){for(var e=t.m1,a=t.m2,n=t.isRefinance,i=t.doItemize,r=t.firstSharedM1Index,s=t.irsFilingStatus,c=t.otherItemizedDeductions,m=t.marginalTaxRate,u=function(t,e,a,n,i){t.interestByYear.push({year:e,interest:F(a),itemizableInterest:F(n),itemizablePeriods:i})},h=function(t,e){return t<e?t/e:1},l=0,d=[e,a];l<d.length;l++){var p=d[l];p.interestByYear=[];var f,y=0,g=0,v=0,x=!0,b=void 0,D=(0,o.Z)(p.payments);try{for(D.s();!(f=D.n()).done;){var A=f.value,M=A.date.year();b&&b!==M&&(x&&(v++,x=!1),u(p,b,y,g,v),y=0,g=0),v++,y+=A.interest;var j=h(p.homeAcquisitionDebt,A.startingBalance);A.itemizableInterest=F(A.interest*j),g+=A.itemizableInterest,b=M}}catch(k){D.e(k)}finally{D.f()}u(p,b,y,g,v)}if(n){var I=r,Z=e.payments[I].date.year(),q=0,R=0;for(I-=2;e.payments[I].date.year()===Z;I--)q+=e.payments[I].interest,R+=e.payments[I].itemizableInterest;var S=h(e.homeAcquisitionDebt,a.loanAmount);a.interestByYear[0].m1Interest=F(q+e.proRatedInterest),a.interestByYear[0].m1ItemizableInterest=R+e.proRatedInterest*S;var w=h(a.homeAcquisitionDebt,a.loanAmount);a.interestByYear[0].interest=F(a.interestByYear[0].interest+a.proRatedInterest),a.interestByYear[0].itemizableInterest=F(a.interestByYear[0].itemizableInterest+e.proRatedInterest*S+a.proRatedInterest*w)}if(i)for(var Y=C.Z.props[s].standardDeduction,W=0,z=[e,a];W<z.length;W++){var B,T=z[W],E=(0,o.Z)(T.interestByYear);try{for(E.s();!(B=E.n()).done;){var O=B.value,P=Y[O.year];O.itemizationNetGain=F(m*Math.max(O.itemizableInterest-Math.max(P-c,0),0))}}catch(k){E.e(k)}finally{E.f()}}}(a),a.netWorthDifferences=function(t){var e=t.m1,a=t.m2,n=t.doItemize,i=t.monthlyRoi,r=t.firstSharedM1Index;!function(t,e){var a=t.initCash+t.initEquity,n=e.initCash+e.initEquity,i=e.payments[0].date.clone().subtract(2,"month"),r=i.valueOf();t.netWorth=[],e.netWorth=[],t.netWorth.push({date:i,unixTimeMs:r,cash:t.initCash,equity:t.initEquity,netWorth:a}),e.netWorth.push({date:i,unixTimeMs:r,cash:e.initCash,equity:e.initEquity,netWorth:n})}(e,a);var o=function(t,e){for(var a=t.monthlyPayment,r=t.initCash,o=t.initCash,s=t.initEquity,c=!0,m=e;m<t.payments.length;m++){var u=!1;c&&m>0&&(u=!0,m--);var h=t.payments[m],l=h.date.clone(),d=h.unixTimeMs;c&&!u&&(l.subtract(1,"month"),d=l.valueOf()),t.rateAdjust&&h.date.isSame(t.rateAdjust.adjustDate)&&(a=t.rateAdjust.monthlyPayment),r+=o*i,n&&(r+=k(h.date.year(),t.interestByYear)),c&&!u||(r-=a,s+=h.principal);var p=F(r+s);r=F(r),t.netWorth.push({date:l,unixTimeMs:d,cash:r,equity:s,netWorth:p}),o=r,c&&!u&&m--,c=!1}};o(e,r),o(a,0);for(var s=[],c=0;c<Math.min(e.netWorth.length,a.netWorth.length);c++)s.push({date:e.netWorth[c].date,unixTimeMs:e.netWorth[c].unixTimeMs,difference:a.netWorth[c].netWorth-e.netWorth[c].netWorth});return s}(a),R(a),a.performanceRanges=function(t){var e,a,n,i=[],r=t[0].date,s=t[t.length-1].date,c=r,m=function(t,e,a){i.push({startDate:t,endDate:e,isPositive:a}),c=e},u=(0,o.Z)(t);try{for(u.s();!(n=u.n()).done;){var h=n.value;e=h.difference>0;var l=0===h.difference;e!==a&&void 0!==a&&m(c,h.date,a),a=l?void 0:e}}catch(d){u.e(d)}finally{u.f()}return m(c,s,a),i}(a.netWorthDifferences);var d,p,y={border:0,fontSize:"initial",padding:0};return(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(s.Z,{variant:"middle"}),(0,B.jsx)("br",{}),(0,B.jsx)("br",{}),(0,B.jsx)(c.Z,{sx:{width:"fit-content",margin:"auto !important"},children:(0,B.jsxs)(m.Z,{children:[(0,B.jsxs)(u.Z,{children:[(0,B.jsx)(h.Z,{sx:(0,i.Z)((0,i.Z)({},y),{},{verticalAlign:"top",whiteSpace:"nowrap"}),children:"Scenario 1:"}),(0,B.jsxs)(h.Z,{sx:y,children:["\xa0",a.isRefinance?"You keep Mortgage 1 instead of refinancing.":"You purchase a home with Mortgage 1."]})]}),(0,B.jsxs)(u.Z,{children:[(0,B.jsx)(h.Z,{sx:(0,i.Z)((0,i.Z)({},y),{},{verticalAlign:"top",whiteSpace:"nowrap"}),children:"Scenario 2:"}),(0,B.jsxs)(h.Z,{sx:y,children:["\xa0",a.isRefinance?"You refinance Mortgage 1 with Mortgage 2.":"You purchase a home with Mortgage 2."]})]})]})}),(0,B.jsx)("br",{}),a.performanceRanges.map((function(t,e){return(0,B.jsxs)(v.Fragment,{children:["From ",t.startDate.format("MM-YYYY")," to"," ",t.endDate.format("MM-YYYY"),", Scenario ",t.isPositive?2:1," ","outperforms Scenario ",t.isPositive?1:2,".",(0,B.jsx)("br",{})]},e)})),(0,B.jsx)("br",{}),(0,B.jsx)(g(),{highcharts:f(),options:(p=a.netWorthDifferences,(0,A.Z)(n,{title:{text:"Comparison"},series:[{name:"Net Worth difference",data:p.map((function(t){return{x:t.unixTimeMs,y:t.difference}})),color:I.blue}],tooltip:{valueDecimals:0}}))}),(0,B.jsxs)("p",{children:['The Comparison graph shows how Scenario 1 and Scenario 2 compare in value over time in terms of Net Worth. Net Worth is defined here as Cash plus Equity -- see below. The graph line values above are "Scenario 2 Net Worth" minus "Scenario 1 Net Worth." So, if a point\'s value is greater than $0, then Scenario 2 is outperforming Scenario 1 at that time (taking into account past performance).',(0,B.jsx)("br",{}),(0,B.jsx)("br",{}),"Note that you can zoom in on graphs by clicking and dragging. You also can show/hide lines by clicking on their legend entries."]}),(0,B.jsx)("br",{}),(0,B.jsx)(g(),{highcharts:f(),options:(d=a.mortgages,(0,A.Z)(n,{title:{text:"Cash & Equity"},series:[].concat((0,x.Z)(d.map((function(t,e){return{name:"Scenario ".concat(t.id," Cash"),data:t.netWorth.map((function(t){return{x:t.unixTimeMs,y:t.cash}})),color:I.teals[e]}}))),(0,x.Z)(d.map((function(t,e){return{name:"Scenario ".concat(t.id," Equity"),data:t.netWorth.map((function(t){return{x:t.unixTimeMs,y:t.equity}})),color:I.golds[e]}})))),tooltip:{valueDecimals:0}}))}),(0,B.jsxs)("p",{children:["For each monthly mortgage payment made, Cash goes down by that amount. Equity goes up by the principal portion of the payment. Cash has additional value over time, as it can be invested. To account for the time value of money, each month Cash is multiplied by a monthly ROI value (which is derived from the yearly ROI value supplied above). If Cash is positive, then this value is added to Cash. If Cash is negative, then this value is an opportunity cost that gets subtracted from Cash.",(0,B.jsx)("br",{}),(0,B.jsx)("br",{}),"If this scenario is a refinance, then the starting cash starts off increased by the cash-out amount and equity starts off decreased by the cash-out amount.",(0,B.jsx)("br",{})]}),(0,B.jsx)("br",{}),(0,B.jsx)(g(),{highcharts:f(),options:S(a.mortgages)}),(0,B.jsx)("p",{children:"This graph shows the total mortgage interest paid in each calendar year."}),(0,B.jsx)("br",{}),(0,B.jsx)(g(),{highcharts:f(),options:w(a.mortgages)}),(0,B.jsx)("p",{children:"This graph shows the outstanding mortgage balances decreasing over time."}),a.mortgages.map((function(t){return(0,B.jsxs)(v.Fragment,{children:[(0,B.jsx)("br",{}),(0,B.jsx)(g(),{highcharts:f(),options:(e=t,(0,A.Z)(n,{chart:{type:"area"},title:{text:"".concat(e.name," Amortization")},plotOptions:{area:{stacking:"normal"},series:{fillOpacity:.15}},series:[{name:"Principal",data:e.payments.map((function(t){return{x:t.unixTimeMs,y:t.principal}})),color:I.green},{name:"Interest",data:e.payments.map((function(t){return{x:t.unixTimeMs,y:t.interest}})),color:I.red}],tooltip:{valueDecimals:2}}))}),(0,B.jsxs)("p",{children:["Amortization schedule for Mortgage ",t.id,"."]})]},t.id);var e}))]})}var $=(0,v.memo)(N)}}]);
//# sourceMappingURL=969.d21594bb.chunk.js.map