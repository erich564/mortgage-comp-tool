"use strict";(self.webpackChunkmortgage_comp_tool=self.webpackChunkmortgage_comp_tool||[]).push([[969],{969:function(t,e,a){a.r(e),a.d(e,{default:function(){return E}});var n,r=a(1413),o=a(7762),s=a(4721),i=a(9836),m=a(3382),c=a(5855),u=a(3994),l=a(3991),h=a.n(l),d=a(9718),p=a.n(d),y=a(2003),f=a.n(y),g=a(2791),x=a(2982),v=a(3861),j=a.n(v),b=a(2426),D=a.n(b),M=a(8499),A={red:"#b84c3e",green:"#86a542",blue:"#6881d8",gold:"#c18739",purple:"#8650a6",teal:"#50b47b",pink:"#b84c7d",grey:"#888"};for(var Z in A){var T=j()(A[Z]);A["".concat(Z,"s")]=[T.lighten(.4).hex(),T.darken(.25).hex()]}p().setOptions({lang:{thousandsSep:","}});var R=function(t){var e=function(t){var e=t[0],a=t[1],n=D().min(e.startDate,a.startDate).clone(),r=D().max(e.endDate,a.endDate).clone(),o=.02*r.diff(n,"days");return n.subtract(o,"days"),r.add(o,"days"),{minDate:n,maxDate:r}}(t),a=e.minDate,r=e.maxDate,o=function(t,e){for(var a=[],n=t.clone().add(1,"year").startOf("year");n.year()%5!==0;)n.add(1,"year");for(;n.isBefore(e);)a.push({color:"#EEE",width:1,value:n.valueOf(),zIndex:2}),n.add(5,"year");return a}(a,r);n={chart:{type:"spline",zoomType:"x"},plotOptions:{series:{states:{hover:{lineWidthPlus:0},inactive:{enabled:!1}},marker:{radius:2}}},xAxis:{type:"datetime",min:a.valueOf(),max:r.valueOf(),plotLines:o},yAxis:{title:{text:null},labels:{format:"${value:,.0f}"}},tooltip:{shared:!0,crosshairs:!0,xDateFormat:"%m-%Y",headerFormat:"{point.key}<br/>",valuePrefix:"$"}}},P=function(t,e){return(0,M.Z)(n,{title:{text:"Net Worth"},series:[{name:"Difference",data:t.map((function(t){return{x:t.unixTimeMs,y:t.difference}})),color:A.grey}].concat((0,x.Z)(e.map((function(t,e){return{name:"".concat(t.name," Net Worth"),data:t.netWorth.map((function(t){return{x:t.unixTimeMs,y:t.netWorth}})),color:A.blues[e]}})))),tooltip:{valueDecimals:0}})},I=function(t){return(0,M.Z)(n,{title:{text:"Total Payments"},series:[].concat((0,x.Z)(t.map((function(t,e){return{name:"".concat(t.name," Payments"),data:t.payments.map((function(t){return{x:t.unixTimeMs,y:t.cumPayments}})),color:A.purples[e]}}))),(0,x.Z)(t.map((function(t,e){return{name:"".concat(t.name," Principal"),data:t.payments.map((function(t){return{x:t.unixTimeMs,y:t.cumPrincipal}})),visible:!1,color:A.greens[e]}}))),(0,x.Z)(t.map((function(t,e){return{name:"".concat(t.name," Interest"),data:t.payments.map((function(t){return{x:t.unixTimeMs,y:t.cumInterest}})),visible:!1,color:A.reds[e]}})))),tooltip:{valueDecimals:0}})},w=function(t){return(0,M.Z)(n,{title:{text:"".concat(t.name," Amortization")},series:[{name:"Principal",data:t.payments.map((function(t){return{x:t.unixTimeMs,y:t.principal}})),color:A.green},{name:"Interest",data:t.payments.map((function(t){return{x:t.unixTimeMs,y:t.interest}})),color:A.red}],tooltip:{valueDecimals:2}})},C=a(4529),W=a(6222),S=a(184),k="en-US",F=function(t){return+(Math.round(+"".concat(t,"e+2"))+"e-2")},O=function(t,e,a){var n=Math.pow(1+e,a);return F(t*(e*n)/(n-1))},q=function(t){var e,a=h()(t);a.roi/=100,a.monthlyRoi=(e=a.roi,Math.pow(1+e,1/12)-1),a.marginalTaxRate/=100;var n,r=(0,o.Z)(a.mortgages);try{for(r.s();!(n=r.n()).done;){var s=n.value;if(s.name="Mortgage ".concat(s.id),s.interestRate/=100,s.loanAmount=+s.loanAmount,s.termMonths=C.Z.props[s.term].months,s.endDate=s.startDate.clone().add(s.termMonths-1,"months"),s.type!==W.Z.FixedRate){var i=W.Z.props[s.type].yearsFixed,m=s.interestRateAdjusted/100;s.rateAdjust={interestRate:m,monthlyInterestRate:m/12,adjustDate:s.startDate.clone().add(i,"years")}}s.monthlyInterestRate=s.interestRate/12,s.monthlyPayment=O(s.loanAmount,s.monthlyInterestRate,s.termMonths),s.payments=[],s.netWorth=[],s.closingCosts=+s.closingCosts,delete s.interestRateAdjusted}}catch(c){r.e(c)}finally{r.f()}return a};function z(t){var e=t.reportState,a=q(e);!function(t){var e,a=(0,o.Z)(t);try{for(a.s();!(e=a.n()).done;)for(var n=e.value,r=n.loanAmount,s=n.monthlyInterestRate,i=n.startDate.clone(),m=n.monthlyPayment,c=void 0;r>0;){var u=F(r*s),l=void 0;l=i.isSame(n.endDate)?r:F(m-u);var h=F(r),d=F(h-l);r=d;var p=F(l+(c?c.cumPrincipal:0)),y=F(u+(c?c.cumInterest:0)),f=F(p+y),g={principal:l,interest:u,date:i.clone(),unixTimeMs:i.valueOf(),startingBalance:h,remainingBalance:d,cumPrincipal:p,cumInterest:y,cumPayments:f};if(n.payments.push(g),i.add(1,"month"),c=g,n.rateAdjust&&i.isSame(n.rateAdjust.adjustDate)){s=n.rateAdjust.monthlyInterestRate;var x=n.termMonths-n.rateAdjust.adjustDate.diff(n.startDate,"months");m=O(r,s,x),n.rateAdjust.monthlyPayment=m}}}catch(v){a.e(v)}finally{a.f()}}(a.mortgages);var l=function(t){var e=t.mortgages,a=t.isRefinance,n=t.doItemize,r=t.marginalTaxRate,o=t.monthlyRoi,s=e[0],i=e[1];if(i.startDate.isBefore(s.startDate)){var m=[i,s];s=m[0],i=m[1]}for(var c,u,l=0,h=0,d=s.payments.length,p=i.payments.length;s.payments[l]&&!s.payments[l].date.isSame(i.startDate);)l++;var y,f=0;a?(c=0,y=-(u=F(i.loanAmount-s.payments[l].startingBalance-i.closingCosts))):(c=-s.closingCosts,u=-i.closingCosts,y=0);for(var g=c,x=u,v=[],j=s.monthlyPayment,b=i.monthlyPayment;l<d||h<p;){var D=l<d?s.payments[l]:i.payments[h],M=D.date,A=D.unixTimeMs,Z=void 0,T=void 0;l<d&&(s.rateAdjust&&M.isSame(s.rateAdjust.adjustDate)&&(j=s.rateAdjust.monthlyPayment),c=c-j+(void 0===g?0:g*o),n&&(c+=s.payments[l].interest*r),f+=s.payments[l].principal,Z=F(c+f),s.netWorth.push({unixTimeMs:A,cash:c,equity:f,netWorth:Z}),g=c,l++),h<p&&(i.rateAdjust&&M.isSame(i.rateAdjust.adjustDate)&&(b=i.rateAdjust.monthlyPayment),u=u-b+(void 0===x?0:x*o),n&&(u+=i.payments[h].interest*r),T=u+(y+=i.payments[h].principal),i.netWorth.push({unixTimeMs:A,cash:u,equity:y,netWorth:T}),x=u,h++),Z&&T&&v.push({unixTimeMs:A,difference:T-Z})}return v}(a);R(a.mortgages);var h,d={border:0,fontSize:"initial",padding:1};return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(s.Z,{variant:"middle"}),(0,S.jsx)("br",{}),(0,S.jsx)("br",{}),(0,S.jsx)(i.Z,{sx:{width:"fit-content",margin:"auto !important"},children:a.mortgages.map((function(t){return(0,S.jsx)(g.Fragment,{children:(0,S.jsx)(m.Z,{children:(0,S.jsxs)(c.Z,{children:[(0,S.jsxs)(u.Z,{sx:(0,r.Z)((0,r.Z)({},d),{},{verticalAlign:"top",whiteSpace:"nowrap"}),children:["Mortgage ",t.id,":"]}),(0,S.jsxs)(u.Z,{sx:d,children:["$",t.loanAmount.toLocaleString(k)," at"," ",100*t.interestRate,"% for",t.type===W.Z.FixedRate?" ".concat(C.Z.props[t.term].name,"."):" the first ".concat(t.rateAdjust.adjustDate.diff(t.startDate,"years")," years, then ").concat(100*t.rateAdjust.interestRate,"% for the remaining duration of the loan."),(0,S.jsx)("br",{}),"Monthly payment",t.type===W.Z.FixedRate?" is $".concat(t.monthlyPayment.toLocaleString(k),"."):" starts at $".concat(t.monthlyPayment.toLocaleString(k),", and then changes to $").concat(t.rateAdjust.monthlyPayment.toLocaleString(k)," on ").concat(t.rateAdjust.adjustDate.format("MM-DD-YYYY"),"."),(0,S.jsx)("br",{})]})]})})},t.id)}))}),(0,S.jsx)("br",{}),"The difference in net worths is the bottom-line takeaway for this tool. Note that you can zoom in on graphs by clicking and dragging.",(0,S.jsx)("br",{}),(0,S.jsx)("br",{}),(0,S.jsx)(f(),{highcharts:p(),options:P(l,a.mortgages)}),(0,S.jsx)("p",{children:'The Net Worth graph shows how Mortgage 1 and Mortgage 2 compare in value over time. Net Worth is defined here as Cash plus Equity. See below. The Difference graph line values are simply "Mortgage 2 Net Worth" minus "Mortgage 1 Net Worth."'}),(0,S.jsx)("br",{}),(0,S.jsx)(f(),{highcharts:p(),options:(h=a.mortgages,(0,M.Z)(n,{title:{text:"Cash & Equity"},series:[].concat((0,x.Z)(h.map((function(t,e){return{name:"".concat(t.name," Cash"),data:t.netWorth.map((function(t){return{x:t.unixTimeMs,y:t.cash}})),color:A.teals[e]}}))),(0,x.Z)(h.map((function(t,e){return{name:"".concat(t.name," Equity"),data:t.netWorth.map((function(t){return{x:t.unixTimeMs,y:t.equity}})),color:A.golds[e]}})))),tooltip:{valueDecimals:0}}))}),(0,S.jsxs)("p",{children:["For each monthly mortgage payment made, Cash goes down by that amount. Equity goes up by the principal portion of the payment. Cash has additional value over time, as it can be invested. To account for the time value of money, each month Cash is multiplied by a monthly ROI value (which is derived from the yearly ROI value supplied above). If Cash is positive, then this value is added to Cash. If Cash is negative, then this value is an opportunity cost that gets subtracted from Cash.",(0,S.jsx)("br",{}),(0,S.jsx)("br",{}),"If this scenario is a refinance, then the starting cash starts off increased by the cash-out amount and equity starts off decreased by the cash-out amount.",(0,S.jsx)("br",{})]}),(0,S.jsx)("br",{}),(0,S.jsx)(f(),{highcharts:p(),options:I(a.mortgages)}),(0,S.jsx)("p",{children:"This graph shows a running total of mortgage payments made. It is further divided into cumulative principal and cumulative interest, via other graph lines. You can show/hide them by clicking on legend entries."}),a.mortgages.map((function(t){return(0,S.jsxs)(g.Fragment,{children:[(0,S.jsx)("br",{}),(0,S.jsx)(f(),{highcharts:p(),options:w(t)}),(0,S.jsxs)("p",{children:["Amortization schedule for Mortgage ",t.id,"."]})]},t.id)}))]})}var E=(0,g.memo)(z)}}]);
//# sourceMappingURL=969.ec544f3f.chunk.js.map